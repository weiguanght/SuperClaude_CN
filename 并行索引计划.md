# 并行仓库索引执行计划 (Parallel Repository Indexing Execution Plan)

## 目标
为以下路径创建全面的仓库索引：`/Users/kazuki/github/SuperClaude_Framework`

## 执行策略

使用 Task 工具**并行**执行以下 5 个任务。
**重要提示**：为了实现并行执行，所有 5 个 Task 工具调用必须在**同一条消息**中发送。

## 执行任务 (并行)

### 任务 1：分析代码结构
- **执行者**：Explore
- **ID**：`code_structure`

**指令 (Prompt)**：
```
分析此仓库的代码结构：/Users/kazuki/github/SuperClaude_Framework

任务：查找并分析所有源代码目录 (src/, lib/, superclaude/, setup/, apps/, packages/)

对于找到的每个目录：
1. 列出所有 Python/JavaScript/TypeScript 文件
2. 识别其用途/职责
3. 记录关键文件及入口点
4. 检测任何组织上的问题

输出格式 (JSON)：
{
    "directories": [
        {
            "path": "相对/路径",
            "purpose": "描述",
            "file_count": 10,
            "key_files": ["file1.py", "file2.py"],
            "issues": ["冗余嵌套", "孤立文件"]
        }
    ],
    "total_files": 100
}

请使用 Glob 和 Grep 工具高效搜索。
要求详尽程度： "very thorough" (非常详尽)。
```

### 任务 2：分析文档
- **执行者**：Explore
- **ID**：`documentation`

**指令 (Prompt)**：
```
分析此仓库的文档：/Users/kazuki/github/SuperClaude_Framework

任务：查找并分析所有文档 (docs/, README*, *.md 文件)

对于每个文档部分：
1. 列出所有 markdown/rst 文件
2. 评估文档覆盖率
3. 识别缺失的文档
4. 检测冗余/重复的文档

输出格式 (JSON)：
{
    "directories": [
        {
            "path": "docs/",
            "purpose": "用户/开发者文档",
            "file_count": 50,
            "coverage": "good|partial|poor",
            "missing": ["API 参考", "架构指南"],
            "duplicates": ["README vs docs/README"]
        }
    ],
    "root_docs": ["README.md", "CLAUDE.md"],
    "total_files": 75
}

使用 Glob 查找所有 .md 文件。
检查重复的内容模式。
```

### 任务 3：分析配置文件
- **执行者**：Explore
- **ID**：`configuration`

**指令 (Prompt)**：
```
分析此仓库的配置文件：/Users/kazuki/github/SuperClaude_Framework

任务：查找并分析所有配置文件 (.toml, .yaml, .yml, .json, .ini, .cfg)

对于每个配置文件：
1. 识别用途 (构建、依赖、CI/CD 等)
2. 记录重要程度
3. 检查问题 (已废弃、未使用)

输出格式 (JSON)：
{
    "config_files": [
        {
            "path": "pyproject.toml",
            "type": "python_project",
            "importance": "critical",
            "issues": []
        }
    ],
    "total_files": 15
}

使用带合适模式的 Glob。
```

### 任务 4：分析测试结构
- **执行者**：Explore
- **ID**：`tests`

**指令 (Prompt)**：
```
分析此仓库的测试结构：/Users/kazuki/github/SuperClaude_Framework

任务：查找并分析所有测试 (tests/, __tests__/, *.test.*, *.spec.*)

对于每个测试目录/文件：
1. 统计测试文件数量
2. 识别测试类型 (单元测试、集成测试、性能测试)
3. 评估覆盖率 (如果有 pytest/coverage 数据)

输出格式 (JSON)：
{
    "test_directories": [
        {
            "path": "tests/",
            "test_count": 20,
            "types": ["unit", "integration", "benchmark"],
            "coverage": "unknown"
        }
    ],
    "total_tests": 25
}

使用 Glob 查找测试文件。
```

### 任务 5：分析脚本及工具
- **执行者**：Explore
- **ID**：`scripts`

**指令 (Prompt)**：
```
分析此仓库的脚本及工具：/Users/kazuki/github/SuperClaude_Framework

任务：查找并分析所有脚本 (scripts/, bin/, tools/, *.sh, *.bash)

对于每个脚本：
1. 识别用途
2. 记录语言 (bash, python 等)
3. 检查是否有文档记录

输出格式 (JSON)：
{
    "script_directories": [
        {
            "path": "scripts/",
            "script_count": 5,
            "purposes": ["构建", "部署", "实用工具"],
            "documented": true
        }
    ],
    "total_scripts": 10
}

使用 Glob 查找脚本文件。
```

## 预期输出

每个任务都将返回包含分析结果的 JSON。
在所有任务完成后，将结果合并为一个统一的仓库索引。

## 性能预期

- 串行执行：约 300ms
- 并行执行：约 60-100ms (提速 3-5 倍)
- 无 GIL 限制 (API 级别的并行)
