# ä»»åŠ¡ç®¡ç†æ¨¡å¼ (Task Management Mode)

**ç›®çš„**ï¼šä¸ºå¤æ‚çš„ã€å¤šæ­¥éª¤æ“ä½œå»ºç«‹å±‚çº§åŒ–çš„ä»»åŠ¡ç»„ç»‡ï¼Œå¹¶è¾…ä»¥æŒä¹…åŒ–è®°å¿†ã€‚

## æ¿€æ´»è§¦å‘å™¨
- éœ€è¦åè°ƒçš„ 3 ä¸ªä»¥ä¸Šæ­¥éª¤çš„æ“ä½œ
- æ¶‰åŠå¤šä¸ªæ–‡ä»¶/ç›®å½•èŒƒå›´ï¼ˆ>2 ä¸ªç›®å½• æˆ– >3 ä¸ªæ–‡ä»¶ï¼‰
- éœ€è¦åˆ†é˜¶æ®µå¤„ç†çš„å¤æ‚ä¾èµ–é¡¹
- æ‰‹åŠ¨æ ‡å¿—ï¼š`--task-manage`, `--delegate`
- è´¨é‡æå‡è¯·æ±‚ï¼šæ¶¦è‰²ã€æç‚¼ã€å¢å¼º

## å¸¦æœ‰è®°å¿†çš„ä»»åŠ¡å±‚çº§

ğŸ“‹ **è®¡åˆ’ (Plan)** â†’ write_memory("plan", ç›®æ ‡å£°æ˜)
â†’ ğŸ¯ **é˜¶æ®µ (Phase)** â†’ write_memory("phase_X", é‡Œç¨‹ç¢‘)
  â†’ ğŸ“¦ **ä»»åŠ¡ (Task)** â†’ write_memory("task_X.Y", äº¤ä»˜ç‰©)
    â†’ âœ“ **å¾…åŠ (Todo)** â†’ TodoWrite + write_memory("todo_X.Y.Z", çŠ¶æ€)

## è®°å¿†æ“ä½œ

### ä¼šè¯å¼€å§‹
```
1. list_memories() â†’ å±•ç¤ºç°æœ‰çš„ä»»åŠ¡çŠ¶æ€
2. read_memory("current_plan") â†’ æ¢å¤ä¸Šä¸‹æ–‡
3. think_about_collected_information() â†’ ç†è§£ä¸Šæ¬¡å·¥ä½œåœåœ¨ä½•å¤„
```

### æ‰§è¡ŒæœŸé—´
```
1. write_memory("task_2.1", "å·²å®Œæˆï¼šè®¤è¯ä¸­é—´ä»¶")
2. think_about_task_adherence() â†’ éªŒè¯æ˜¯å¦åç¦»è·¯çº¿
3. å¹¶è¡Œæ›´æ–° TodoWrite çŠ¶æ€
4. æ¯ 30 åˆ†é’Ÿé€šè¿‡ write_memory("checkpoint", current_state) è®¾ç½®æ£€æŸ¥ç‚¹
```

### ä¼šè¯ç»“æŸ
```
1. think_about_whether_you_are_done() â†’ è¯„ä¼°å®Œæˆæƒ…å†µ
2. write_memory("session_summary", äº¤ä»˜æˆæœ)
3. delete_memory() ç§»é™¤å·²å®Œæˆçš„ä¸´æ—¶é¡¹
```

## æ‰§è¡Œæ¨¡å¼

1. **åŠ è½½ (Load)**ï¼šlist_memories() â†’ read_memory() â†’ æ¢å¤çŠ¶æ€
2. **è§„åˆ’ (Plan)**ï¼šåˆ›å»ºå±‚çº§ç»“æ„ â†’ ä¸ºæ¯ä¸ªå±‚çº§æ‰§è¡Œ write_memory()
3. **è·Ÿè¸ª (Track)**ï¼šå¹¶è¡Œè¿›è¡Œ TodoWrite å’Œè®°å¿†æ›´æ–°
4. **æ‰§è¡Œ (Execute)**ï¼šä»»åŠ¡å®Œæˆæ—¶æ›´æ–°è®°å¿†
5. **æ£€æŸ¥ç‚¹ (Checkpoint)**ï¼šå®šæœŸä½¿ç”¨ write_memory() ä¿å­˜çŠ¶æ€
6. **å®Œæˆ (Complete)**ï¼šæœ€åä¸€æ¬¡æ›´æ–°è®°å¿†ï¼Œè®°å½•äº§å‡ºæˆæœ

## å·¥å…·é€‰æ‹©

| ä»»åŠ¡ç±»å‹ | ä¸»è¦å·¥å…· | è®°å¿†é”®å (Memory Key) |
|-----------|-------------|------------|
| åˆ†æ | Sequential MCP | "analysis_results" |
| å®æ–½ | MultiEdit/Morphllm | "code_changes" |
| UI ç»„ä»¶ | Magic MCP | "ui_components" |
| æµ‹è¯• | Playwright MCP | "test_results" |
| æ–‡æ¡£ | Context7 MCP | "doc_patterns" |

## è®°å¿†æ¨¡å¼ (Memory Schema)

```
plan_[æ—¶é—´æˆ³]ï¼šæ€»ä½“ç›®æ ‡å£°æ˜
phase_[1-5]ï¼šä¸»è¦é‡Œç¨‹ç¢‘æè¿°
task_[é˜¶æ®µ].[ç¼–å·]ï¼šå…·ä½“äº¤ä»˜ç‰©çŠ¶æ€
todo_[ä»»åŠ¡].[ç¼–å·]ï¼šåŸå­çº§æ“ä½œå®Œæˆæƒ…å†µ
checkpoint_[æ—¶é—´æˆ³]ï¼šå½“å‰çŠ¶æ€å¿«ç…§
blockersï¼šéœ€è¦å…³æ³¨çš„æ´»è·ƒé˜»ç¢é¡¹
decisionsï¼šåšå‡ºçš„å…³é”®æ¶æ„/è®¾è®¡é€‰æ‹©
```

## ç¤ºä¾‹

### ä¼šè¯ 1ï¼šå¯åŠ¨èº«ä»½éªŒè¯ä»»åŠ¡
```
list_memories() â†’ ä¸ºç©º
write_memory("plan_auth", "å®ç° JWT èº«ä»½éªŒè¯ç³»ç»Ÿ")
write_memory("phase_1", "åˆ†æ - å®‰å…¨éœ€æ±‚å®¡æŸ¥")
write_memory("task_1.1", "å¾…å¤„ç†ï¼šå®¡æŸ¥ç°æœ‰è®¤è¯æ¨¡å¼")
TodoWriteï¼šåˆ›å»º 5 ä¸ªå…·ä½“å¾…åŠé¡¹
æ‰§è¡Œä»»åŠ¡ 1.1 â†’ write_memory("task_1.1", "å·²å®Œæˆï¼šæ‰¾åˆ° 3 ç§æ¨¡å¼")
```

### ä¼šè¯ 2ï¼šåœ¨ä¸­æ–­åæ¢å¤
```
list_memories() â†’ æ˜¾ç¤º plan_auth, phase_1, task_1.1
read_memory("plan_auth") â†’ "å®ç° JWT èº«ä»½éªŒè¯ç³»ç»Ÿ"
think_about_collected_information() â†’ "åˆ†æå·²å®Œæˆï¼Œå¼€å§‹å®æ–½"
think_about_task_adherence() â†’ "æŒ‰è®¡åˆ’è¿›è¡Œï¼Œè¿›å…¥é˜¶æ®µ 2"
write_memory("phase_2", "å®æ–½ - ä¸­é—´ä»¶å’Œç«¯ç‚¹")
ç»§ç»­æ‰§è¡Œå®æ–½ä»»åŠ¡...
```

### ä¼šè¯ 3ï¼šå®Œæˆåº¦æ£€æŸ¥
```
think_about_whether_you_are_done() â†’ "æµ‹è¯•é˜¶æ®µå°šæœªå®Œæˆ"
å®Œæˆå‰©ä½™çš„æµ‹è¯•ä»»åŠ¡
write_memory("outcome_auth", "æˆåŠŸå®æ–½ï¼Œæµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 95%")
delete_memory("checkpoint_*") â†’ æ¸…ç†ä¸´æ—¶çŠ¶æ€
write_memory("session_summary", "èº«ä»½éªŒè¯ç³»ç»Ÿå·²å®Œæˆå¹¶éªŒè¯")
```
