# 更新日志 (Changelog)

SuperClaude 的所有重大变更都将记录在此文件中。

本项目遵循 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) 规范，
并坚持 [语义化版本 (Semantic Versioning)](https://semver.org/spec/v2.0.0.html) 原则。

## [未发布]

## [4.2.0] - 2025-09-18
### 新增
- **深度研究系统 (Deep Research System)** —— 完整实现自主网页研究能力。
  - 新增 `/sc:research` 命令，采用 DR Agent 架构进行智能网页调研。
  - `deep-research-agent` —— 第 15 个专业智能体，负责研究编排。
  - `MODE_DeepResearch` —— 第 7 种行为模式，专为研究工作流设计。
  - 集成 Tavily MCP (第 7 个 MCP 服务器)，支持实时网页搜索。
  - 研究配置系统 (`RESEARCH_CONFIG.md`)。
  - 全面的工作流示例 (`deep_research_workflows.md`)。
  - 三种规划策略：仅规划 (Planning-Only)、意图到规划 (Intent-to-Planning)、统一意图规划 (Unified Intent-Planning)。
  - 支持多跳推理 (Multi-hop reasoning)，具备复杂查询的系谱追踪功能。
  - 基于案例的推理 (Case-based reasoning)，可从历史研究模式中学习。

### 变更
- 智能体数量从 14 个更新为 15 个（新增 `deep-research-agent`）。
- 模式数量从 6 个更新为 7 个（新增 `MODE_DeepResearch`）。
- MCP 服务器数量从 6 个更新为 7 个（新增 Tavily）。
- 命令数量从 24 个更新为 25 个（新增 `/sc:research`）。
- 增强了 MCP 组件，支持 Tavily 的远程服务器配置。
- 添加了 `_install_remote_mcp_server` 方法来处理远程 MCP 配置。

### 技术改进
- 在 `setup/components/mcp_docs.py` 的 `server_docs_map` 中添加了 Tavily。
- 在 `setup/components/mcp.py` 中实现了远程 MCP 服务器处理器。
- 在 `setup/utils/environment.py` 中添加了 `check_research_prerequisites()` 函数。
- 创建了验证脚本 `scripts/verify_research_integration.sh`。

### 运行要求
- 用于网页搜索功能的 `TAVILY_API_KEY` 环境变量。
- 执行 Tavily MCP 所需的 Node.js 和 npm 环境。

## [4.1.5] - 2025-09-26
### 新增
- 将全面的标志 (Flags) 文档集成到 `/sc:help` 命令中。
- 框架全部 25 个标志现在均可通过帮助系统发现。
- 增加了实际使用示例和标志优先级规则。

### 修复
- 改进了 MCP 增量安装和自动检测系统。
- 能够从 `.claude.json` 和 `claude_desktop_config.json` 中自动检测现有的 MCP 服务器。
- 智能服务器合并（现有 + 已选 + 此前已安装）。
- 文档清理：移除了不存在的命令 (`sc:fix`, `sc:simple-pix`, `sc:update`, `sc:develop`, `sc:modernize`, `sc:simple-fix`)。
- 修改 CLI 逻辑，允许在未选择服务器的情况下安装 `mcp_docs`。

### 变更
- MCP 组件现在支持真正的增量安装。
- `mcp_docs` 组件可自动检测并为所有发现的服务器安装文档。
- 改进了错误处理，针对损坏的配置文件提供了平滑回退机制。
- 优化了用户体验，为 SuperClaude 的所有能力提供了单一参考源。

## [4.1.0] - 2025-09-13
### 新增
- 在安装程序 UI 页眉显示作者名称和邮箱。
- 为组件添加 `is_reinstallable` 标志，允许重复运行安装。

### 修复
- 安装程序现在可以正确地在后续运行中仅安装选定的 MCP 服务器。
- 修正了 `mcp` 和 `mcp_docs` 组件的验证逻辑，防止误报失败。
- 确保空的备份存档创建为有效的 tar 文件。
- 解决了仅安装选定 MCP 的问题。
- 将 Mithun Gowda B 添加为作者。
- **MCP 安装程序**：修复了 MCP 安装和更新过程中若干严重 Bug，提升了可靠性。
  - 修正了 `setup/components/mcp.py` 中 `morphllm` 服务器的 npm 包名。
  - 使用 `uv` 为 `serena` 服务器实现了自定义安装方法（因为它不是 npm 包）。
  - 解决了 `setup/cli/commands/install.py` 中 `update` 命令的 `NameError`。
  - 通过确保组件注册表仅初始化一次，解决了反复出现的 "Unknown component: core" 错误。
  - 将 `claude` CLI 添加为 MCP 服务器管理的正式前置要求（此前未记录）。

### 技术改进
- 为 PyPI 发行准备了安装包。
- 验证了包结构和依赖项。

## [4.0.7] - 2025-01-23

### 新增
- 针对 PyPI 和 NPM 包的自动更新检查。
- `--no-update-check` 标志用于跳过更新检查。
- `--auto-update` 标志用于在不提示的情况下自动更新。
- 支持环境变量 `SUPERCLAUDE_AUTO_UPDATE`。
- 带有彩色横幅的更新通知，显示可用版本。
- 限制每 24 小时检查一次更新。
- 智能安装方法检测 (pip/pipx/npm/yarn)。
- 用于更新检查时间戳的缓存文件 (`~/.claude/.update_check` 和 `.npm_update_check`)。

### 修复
- 组件验证现在可正确使用 pipx 安装的版本而非源码。

### 技术改进
- 添加了 `setup/utils/updater.py` 处理 PyPI 更新检查逻辑。
- 添加了 `bin/checkUpdate.js` 处理 NPM 更新检查逻辑。
- 将更新检查集成到主要入口点 (`superclaude/__main__.py` 和 `bin/cli.js`)。
- 采用 2 秒超时时间的非阻塞更新检查，避免延迟。

### 变更
- **重大变更 (BREAKING)**：智能体系统重组为 14 个专业智能体。
- **重大变更 (BREAKING)**：命令现在使用 `/sc:` 命名空间，以避免与用户自定义命令冲突。
- 命令现在安装在 `~/.claude/commands/sc/` 子目录中。
- 所有 21 个命令均已更新：`/analyze` → `/sc:analyze`, `/build` → `/sc:build` 等。
- 支持从旧命令位置自动迁移到新的 `sc/` 子目录。
- **重大变更 (BREAKING)**：文档组织重构 —— `docs/` 目录重命名为 `Guides/`。

### 新增 (4.0.7)
- **新智能体**：14 个具备增强能力的专业领域智能体。
- **新模式**：新增 `MODE_Orchestration.md`（编排模式），用于智能工具选择（共 5 种行为模式）。
- **新命令**：新增 `/sc:implement` 用于功能和代码实现（响应 v2 用户反馈）。
- **新文件**：`CLAUDE.md` 针对项目特定的 Claude Code 指令。
- 实现了自动移动现有命令到新命名空间的迁移逻辑。
- 增强了卸载程序，可处理旧版和新版命令位置。
- 改进了命令冲突预防机制。
- 更好的命令组织与可发现性。
- 全面的 PyPI 发布基础设施。
- SuperClaude MCP 设置过程中的 API 密钥管理。

### 移除
- **重大变更 (BREAKING)**：移除了 `Templates/` 目录（不再需要旧版模板）。
- **重大变更 (BREAKING)**：移除了旧版智能体，替换为增强的 14 个智能体系统。

### 改进
- 重构了模式 (Modes) 和 MCP 文档，提供简洁的代码行为指导。
- 针对 PyPI 发布增强了项目清理和 `.gitignore`。
- 实现了卸载和更新的安全增强。
- 强化了智能体的专业化程度和领域专长。

## [4.0.6] - 2025-08-23

### 修复
- 组件验证现在可正确检查 `.superclaude-metadata.json` 而非 `settings.json` (#291)。
- 将所有组件的版本号统一为 4.0.6。
- 修复了智能体验证中检查错误文件名的问题。
- 修复了 `package.json` 版本不一致问题（之前是 4.0.5）。

### 变更
- 全项目版本号从 4.0.4 提升至 4.0.6。
- 所有组件版本现在同步为 4.0.6。
- 清理了元数据文件结构以保持一致。

## [4.0.4] - 2025-08-22

### 新增
- **智能体系统**：13 个专业领域专家，取代了之前的“角色 (Personas)”。
- **行为模式**：针对不同工作流的 4 种智能模式（头脑风暴、内省、任务管理、Token 效率）。
- **会话生命周期**：新增 `/sc:load` 和 `/sc:save`，配以 Serena MCP 实现跨会话持久化。
- **新命令**：`/sc:brainstorm`, `/sc:reflect`, `/sc:save`, `/sc:select-tool` (共 21 个命令)。
- **Serena MCP**：语义化代码分析与记忆管理。
- **Morphllm MCP**：具备快速应用 (Fast Apply) 能力的智能文件编辑。
- **核心组件**：基于 Python 的框架集成（完全重新设计并实现）。
- **模板**：用于创建新组件的全套模板。
- **Python-Ultimate-Expert 智能体**：用于生产级代码的大师级 Python 架构师。

### 变更
- 命令从 16 个扩展到 21 个专业命令。
- 用 13 个专业智能体取代了之前的角色。
- 增强了 MCP 集成（共 6 个服务器）。
- 提升了 Token 效率（在 Token 效率模式下可降低 30-50% 消耗）。
- 会话管理现在使用 Serena 集成进行持久化。
- 重组了框架结构以实现更好的模块化。

### 改进
- 多层编排的任务管理 (TodoWrite, /task, /spawn, /loop)。
- 具备 8 步验证循环的质量门限。
- 性能监控与优化。
- 跨会话上下文保存。
- 针对 `ORCHESTRATOR.md` 增强了智能路由。

## [3.0.0] - 2025-07-14

### 新增
- SuperClaude v3.0 初始版本。
- 15 个针对开发任务的专业斜杠命令。
- 智能角色自动激活系统。
- MCP 服务器集成 (Context7, Sequential, Magic, Playwright)。
- 具备多种安装配置文件的统一 CLI 安装程序。
- 全面的文档与用户指南。
- Token 优化框架。
- 任务管理系统。

---

*查看更多详情请参考 `docs/` 目录。*
