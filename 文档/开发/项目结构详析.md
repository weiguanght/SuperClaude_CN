# SuperClaude 框架 —— 项目结构核心理解 (Project Structure)

> **关键认知**：理清本项目（源码）与安装后环境（用户配置）之间的关系。

---

## 🏗️ 两个世界的界限

### 1. 本项目（Git 管理 · 开发环境）
**位置**：`~/github/SuperClaude_Framework/`  
**角色**：存放源代码、进行开发与测试。

- `setup/`: 安装程序逻辑（定义如何安装组件）。
- `superclaude/`: 运行时逻辑（各功能模块的源码）。
  - `agents/`: 智能体定义。
  - `commands/`: 命令实现。
  - `modes/`: 模式定义。
- `tests/`: 测试代码。
- `docs/`: 开发者文档（如本文件）。

**操作原则**：
- ✅ 修改源代码
- ✅ Git 提交与 PR
- ✅ 运行测试
- ✅ 版本管理

---

### 2. 安装后环境（用户环境 · Git 管理外）
**位置**：`~/.claude/`  
**角色**：Claude Code 实际读取的运行配置。

- `commands/sc/`: 安装后的斜杠命令。
- `CLAUDE.md`: 安装后的全局设置。
- `agents/`: 安装后的智能体。
- `.claude.json`: Claude Code 自身的设置。

**操作原则**：
- ✅ **仅限阅读**（用于理解和确认）
- ✅ 验证实际运行效果
- ⚠️ 测试时可进行临时修改（**必须在结束后恢复原状！**）
- ❌ 禁止进行永久性修改（因为无法进行 Git 追踪）

---

## 🔄 安装流程简述

1. **用户操作**：运行 `SuperClaude install`。
2. **内部处理**：`setup/` 下的各组件逻辑开始运行。
3. **结果**：将本项目中的特定文件（源码）复制到 `~/.claude/`（目标位置）。
4. **加载**：当用户启动 Claude 时，它会读取 `~/.claude/` 下的配置，从而使 `/sc:pm` 等命令生效。

---

## 📝 开发工作流指南

### ✅ 正确的方法
1. **理解现状**：查看 `setup/` 下的安装逻辑，并确认 `~/.claude/` 下对应的生成结果。
2. **文档化**：在本项目内编写假说文档 (`docs/Development/hypothesis-*.md`)。
3. **临时实验**：如需快速验证，可备份 `~/.claude/` 下的文件，修改后测试，测试完立即恢复。
4. **正式实施**：修改 `setup/` 或 `superclaude/` 下的源码文件，编写并运行测试。
5. **提交与更新**：进行 Git 提交，并使用 `SuperClaude install --dev` 应用到本地环境。

### ❌ 错误的方法
- **直接修改 `~/.claude/` 下的内容**：这会导致修改无法被 Git 记录，且在下次重新安装或更新时，这些修改会被源码覆盖而丢失。

---

## 🎯 核心原则

1. **严守 Git 管理边界**：所有永久性修改必须在本项目源码内进行。
2. **测试必恢复**：对 `.claude/` 目录的任何实验性改动必须在测试后恢复备份。
3. **文档驱动**：在动手之前，先通过文档记录理解、假说与实验计划。
