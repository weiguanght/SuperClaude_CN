# SuperClaude 插件重组计划 (Plugin Re-organization)

## 真理之源 (Source of Truth)

| 领域 | 当前仓库 | 目标位置 (Framework) | 备注 |
|---|---|---|---|
| Agent 文档 (`agents/*.md`) | `SuperClaude_Plugin/agents/` | `plugins/superclaude/agents/` | `/sc:*` 命令读取的 Markdown 指令。 |
| 命令定义 (`commands/*.md`) | `SuperClaude_Plugin/commands/` | `plugins/superclaude/commands/` | YAML 前置元数据 + Markdown 正文。 |
| Hook 配置 | `SuperClaude_Plugin/hooks/hooks.json` | `plugins/superclaude/hooks/hooks.json` | SessionStart 自动化。 |
| Skill 源码 | 散落在两个仓库 | **Framework 中唯一的规范副本** `plugins/superclaude/skills/` | 用构建产物替换插件仓库中的副本。 |
| 会话初始化脚本 | `SuperClaude_Plugin/scripts/*.sh` | `plugins/superclaude/scripts/` | 通过 Claude Code hooks 执行。 |
| 插件清单 (`plugin.json`) | `SuperClaude_Plugin/.claude-plugin/` | 从 `plugins/superclaude/manifest/` 模板生成 | 发布时参数化填充版本信息。 |
| 技能测试 | `SuperClaude_Plugin/.claude-plugin/tests/` | `plugins/superclaude/tests/` | 为了保证打包前能先运行测试。 |

## `SuperClaude_Framework` 建议布局

```
plugins/
  superclaude/
    agents/
    commands/
    hooks/
    scripts/
    skills/
      confidence-check/
        SKILL.md
        confidence.ts
    manifest/
        plugin.template.json
        marketplace.template.json
    tests/
      confidence/
        test_cases.json
        expected_results.json
        run.py
```

## 构建工作流

1. **`make build-plugin` (新目标)**:
   - 验证技能测试 (`uv run` / Node 单元测试)。
   - 将 `plugins/superclaude/*` 复制到全新的 `dist/plugins/superclaude/.claude-plugin/` 树中。
   - 使用 `pyproject.toml` 或 git tags 中的版本信息渲染清单模板。

2. **`make sync-plugin-repo`**:
   - 将生成的产物 rsync 到 `../SuperClaude_Plugin/`。
   - 复制前清理陈旧文件（防止漂移）。

## 下一步

- [ ] 将 `SuperClaude_Plugin` 中的现有资产迁移到 Framework 布局中。
- [ ] 更新 Framework 文档 (CLAUDE.md, README) 以引用新的构建命令。
- [ ] 通过添加 README 横幅（“自动生成 - 请勿编辑”）和 CI 拦截，禁止直接编辑 `SuperClaude_Plugin`。
- [ ] 定义扩展 `/sc:*` 命令的路线图（识别哪些遗留流程值得作为可选模块重新引入）。
