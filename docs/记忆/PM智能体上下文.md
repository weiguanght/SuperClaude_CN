# PM 智能体上下文 (PM Agent Context)

**项目**：SuperClaude_Framework  
**类型**：AI 智能体框架  
**技术栈**：Claude Code, MCP 服务器, 基于 Markdown 的配置  
**当前重点**：具有渐进式上下文加载能力的 Token 效率架构

## 项目概览
SuperClaude 是一个为 Claude Code 提供的综合框架，包含：
- 基于角色的专业智能体（前端、后端、安全等）。
- MCP 服务器集成（Context7, Magic, Morphllm, Sequential 等）。
- 用于工作流自动化的斜杠命令系统。
- 带有 PDCA 循环的自我改进工作流。
- **新增**：采用渐进式加载的 Token 优化型 PM 智能体。

## 架构组成
- `plugins/superclaude/agents/`：智能体角色定义。
- `plugins/superclaude/commands/`：斜杠命令定义（如 `pm.md`）。
- `docs/`：文档与模式库。
- `docs/memory/`：PM 智能体本地会话状态文件。
- `docs/pdca/`：针对每项特性的 PDCA 循环记录。
- `docs/research/`：研究报告（如 Token 效率研究）。

## Token 效率架构 (2025-10-17 重设计)

### 分层加载策略 (5 层)
1. **第 0 层：引导 (Bootstrap)**：仅需 150 Token，负责时间感知、仓库检测与初始化。
2. **层级意图分类**：根据任务复杂度（极轻量到超重量）动态决定加载层级。
3. **渐进式加载**：
   - 第 1 层：极简上下文（约 500-800 Token）。
   - 第 2 层：目标上下文（约 500-1K Token）。
   - 第 3 层：关联上下文（约 3-4.5K Token）。
   - 第 4 层：系统上下文（约 8-12K Token，需用户确认）。
   - 第 5 层：外部研究（20-50K Token，需用户确认并警示）。

### 工作流指标收集
- 文件：`docs/memory/workflow_metrics.jsonl`
- 目的：通过 A/B 测试持续优化工作流，记录任务类型、 Token 消耗、执行时长及成功率。

## 活跃模式
- **仓库作用域记忆**：存储在 `docs/memory/` 中的本地文件。
- **PDCA 循环**：计划 → 执行 → 检查 → 行动的文档化流程。
- **自我评估清单**：替代原有的 `think_about_*` 函数。
- **用户请求优先**：引导 → 等待指令 → 意图分类 → 渐进加载 → 执行。

## 最近变更 (2025-10-17)
- 废除了启动时自动加载 7 个文件的旧方案（节省 2,300 Token）。
- 实施了第 0 层引导机制与意图分类系统。
- 引入了工作流指标分析报告。

---

**最后更新**：2025-10-17
