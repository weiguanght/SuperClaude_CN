---
name: save
description: "集成 Serena MCP 的会话生命周期管理，用于持久化会话上下文"
category: session
complexity: standard
mcp-servers: [serena]
personas: []
---

# /sc:save - 会话上下文持久化

## 触发场景
- 会话结束时，需要持久化项目上下文。
- 跨会话记忆管理与检查点 (Checkpoint) 创建请求。
- 保存项目理解及归档调研发现。
- 会话生命周期管理与进度追踪要求。

## 用法
```
/sc:save [--type session|learnings|context|all] [--summarize] [--checkpoint]
```

## 行为流程
1. **分析 (Analyze)**：检查会话进度并识别值得保留的发现。
2. **持久化 (Persist)**：使用 Serena MCP 记忆管理保存会话上下文与学习心得。
3. **检查点 (Checkpoint)**：为复杂会话和进度追踪创建恢复点。
4. **验证 (Validate)**：确保会话数据的完整性及跨会话兼容性。
5. **准备 (Prepare)**：为未来会话的无缝衔接准备好会话上下文。

核心行为：
- 集成 Serena MCP 负责记忆管理与跨会话持久化。
- 根据会话进度与关键任务自动创建检查点。
- 具备完整发现与模式归档的会话上下文保留。
- 通过累积项目见解与技术决策实现跨会话学习。

## MCP 集成
- **Serena MCP**：强制集成，负责会话管理、记忆操作及跨会话持久化。
- **记忆操作**：会话上下文存储、检查点创建及调研发现归档。
- **性能指标**：记忆操作 <200ms，创建检查点 <1s。

## 工具协作
- **write_memory/read_memory**：核心会话上下文持久化与检索工具。
- **think_about_collected_information**：会话分析与发现识别。
- **summarize_changes**：会话总结生成与进度记录。
- **TodoRead**：任务完成度追踪，以触发自动检查点。

## 关键模式
- **会话保留**：发现分析 → 记忆持久化 → 检查点创建。
- **跨会话学习**：上下文积累 → 模式归档 → 增强对项目的理解。
- **进度追踪**：任务完成 → 自动检查点 → 会话连续性。
- **恢复规划**：状态保留 → 检查点验证 → 恢复就绪状态检查。

## 示例

### 基础会话保存
```
/sc:save
```
# 将当前会话的发现与上下文保存至 Serena MCP
# 若会话超过 30 分钟，将自动创建检查点

### 综合会话检查点
```
/sc:save --type all --checkpoint
```
# 完整的会话保留，带恢复检查点
# 包含用于会话恢复的所有学习心得、上下文及进度

### 会话总结生成
```
/sc:save --summarize
```
# 创建包含发现记录的会话总结
# 更新跨会话学习模式与项目见解

### 仅持久化调研发现
```
/sc:save --type learnings
```
# 仅保存会话期间发现的新模式与见解
# 在不保留完整会话的情况下更新项目理解

## 边界

**能力范围：**
- 利用 Serena MCP 集成进行跨会话持久化并保存会话上下文。
- 根据会话进度与任务完成情况自动创建检查点。
- 保留调研发现与模式以增强项目理解。

**非能力范围：**
- 在没有适当的 Serena MCP 集成与记忆访问权限的情况下运行。
- 在未经过验证与完整性检查的情况下保存会话数据。
- 在未能保存检查点的情况下覆盖现有的会话上下文。
