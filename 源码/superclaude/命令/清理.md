---
name: cleanup
description: "系统地清理代码、移除冗余代码并优化项目结构"
category: workflow
complexity: standard
mcp-servers: [sequential, context7]
personas: [architect, quality, security]
---

# /sc:cleanup - 代码与项目清理

## 触发场景
- 代码维护与减少技术债的请求。
- 移除冗余代码 (Dead Code) 及优化导入 (Import) 的需求。
- 项目结构改进与组织整理的要求。
- 代码库卫生检查与质量提升计划。

## 用法
```
/sc:cleanup [目标] [--type code|imports|files|all] [--safe|--aggressive] [--interactive]
```

## 行为流程
1. **分析 (Analyze)**：在目标范围内评估清理机会及安全考量。
2. **计划 (Plan)**：选择清理方案并激活相关的人格提供领域专业知识。
3. **执行 (Execute)**：应用系统化清理，智能检测并移除冗余代码。
4. **验证 (Validate)**：通过测试与安全校验确保无功能损失。
5. **汇报 (Report)**：生成清理摘要，并提供后续维护建议。

核心行为：
- 根据清理类型协调多个人格 (架构师、质量工程师、安全工程师)。
- 通过 Context7 MCP 集成应用框架特定的清理模式。
- 通过 Sequential MCP 对复杂清理操作进行系统化分析。
- 安全至上的方法，具备备份与回滚能力。

## MCP 集成
- **Sequential MCP**：自动激活，用于复杂的多步清理分析与规划。
- **Context7 MCP**：提供框架特定的清理模式与最佳实践。
- **人格协作**：架构师 (结构)、质量工程师 (技术债)、安全工程师 (凭据/机密信息)。

## 工具协作
- **Read/Grep/Glob**：代码分析与清理机会的模式检测。
- **Edit/MultiEdit**：安全的代码修改与结构优化。
- **TodoWrite**：针对复杂多文件清理操作的进度追踪。
- **Task**：针对需要系统化协调的大规模清理工作流进行委派。

## 关键模式
- **冗余代码检测**：使用情况分析 → 带有依赖验证的安全移除。
- **导入优化**：依赖分析 → 移除未使用的导入并进行整理。
- **结构清理**：架构分析 → 文件组织与模块化改进。
- **安全验证**：前/中/后校验 → 在整个清理过程中保留原有功能。

## 示例

### 安全代码清理
```
/sc:cleanup src/ --type code --safe
```
# 执行保守的清理，并带有自动安全验证
# 移除冗余代码的同时保留所有功能

### 导入优化预览
```
/sc:cleanup --type imports --preview
```
# 分析并展示未使用的导入清理建议，但不执行实际修改
# 通过 Context7 模式实现框架感知的优化

### 综合项目清理
```
/sc:cleanup --type all --interactive
```
# 多领域清理，并针对复杂决策提供用户引导
# 激活所有相关人格进行全面分析

### 框架特定清理
```
/sc:cleanup components/ --aggressive
```
# 应用 Context7 框架模式进行彻底清理
# 针对复杂的依赖管理执行系统化分析

## 边界

**能力范围：**
- 系统地清理代码、移除冗余代码并优化项目结构。
- 提供全面的安全验证，包括备份与回滚能力。
- 应用集成框架特定模式识别的智能清理算法。

**非能力范围：**
- 在没有经过彻底安全分析与验证的情况下移除代码。
- 越权处理项目特定的清理排除项或架构约束。
- 应用任何会削弱功能或引入 Bug 的清理操作。
