---
name: test
description: "执行具备覆盖率分析与自动化质量报告能力的测试"
category: utility
complexity: enhanced
mcp-servers: [playwright]
personas: [qa-specialist]
---

# /sc:test - 测试与质量保证

## 触发场景
- 针对单元测试、集成测试或 E2E 测试的执行请求。
- 覆盖率分析与质量门禁验证需求。
- 持续测试与监听模式 (Watch Mode) 场景。
- 测试失败分析与调试需求。

## 用法
```
/sc:test [目标] [--type unit|integration|e2e|all] [--coverage] [--watch] [--fix]
```

## 行为流程
1. **探索 (Discover)**：利用测试运行器 (Runner) 模式与惯例对可用测试进行分类。
2. **配置 (Configure)**：设置合适的测试环境与执行参数。
3. **执行 (Execute)**：运行测试，并进行监控与实时进度追踪。
4. **分析 (Analyze)**：生成覆盖率报告与失败诊断。
5. **汇报 (Report)**：提供可操作的建议与质量指标。

核心行为：
- 自动检测测试框架与配置。
- 生成包含指标的全面覆盖率报告。
- 激活 Playwright MCP 进行 E2E 浏览器测试。
- 提供智能的测试失败分析。
- 为开发提供持续的监听模式支持。

## MCP 集成
- **Playwright MCP**：针对 `--type e2e` 浏览器测试自动激活。
- **QA 专家 (QA Specialist) 人格**：负责测试分析与质量评估。
- **增强能力**：跨浏览器测试、视觉验证、性能指标分析。

## 工具协作
- **Bash**：负责测试运行器的执行与环境管理。
- **Glob**：负责测试发现及文件模式匹配。
- **Grep**：负责结果解析与失败分析。
- **Write**：负责生成覆盖率报告与测试摘要。

## 关键模式
- **测试发现**：基于模式的分类 → 选择合适的运行器。
- **覆盖率分析**：执行指标 → 综合性的覆盖率汇报。
- **E2E 测试**：浏览器自动化 → 跨平台验证。
- **监听模式**：文件监控 → 持续测试执行。

## 示例

### 基础测试执行
```
/sc:test
```
# 探索并以标准配置运行所有测试
# 生成通过/失败摘要及基础覆盖率报告

### 针对性的覆盖率分析
```
/sc:test src/components --type unit --coverage
```
# 针对特定目录运行单元测试，并提供详细的覆盖率指标

### 浏览器测试
```
/sc:test --type e2e
```
# 激活 Playwright MCP 以执行全面的浏览器测试
# 包含跨浏览器兼容性与视觉验证

### 开发监听模式
```
/sc:test --watch --fix
```
# 持续测试，并自动修复简单的测试失败
# 在开发过程中提供实时反馈

## 边界

**能力范围：**
- 使用项目中配置的测试运行器执行现有的测试套件。
- 生成覆盖率报告与质量指标。
- 提供智能的测试失败分析并给出可操作建议。

**非能力范围：**
- 生成测试用例或修改测试框架配置。
- 在缺乏适当设置的情况下执行需要外部服务的测试。
- 在没有明确许可的情况下对测试文件进行破坏性更改。
