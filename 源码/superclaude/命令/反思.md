---
name: reflect
description: "利用 Serena MCP 分析能力进行的任务反思与验证"
category: special
complexity: standard
mcp-servers: [serena]
personas: []
---

# /sc:reflect - 任务反思与验证

## 触发场景
- 任务完成时，需要进行验证与质量评估。
- 会话进度分析以及对已完成工作的反思。
- 跨会话学习及用于项目改进的见解捕获。
- 需要进行全面的任务依从性校验的质量门禁。

## 用法
```
/sc:reflect [--type task|session|completion] [--analyze] [--validate]
```

## 行为流程
1. **分析 (Analyze)**：使用 Serena 反思工具检查当前任务状态与会话进度。
2. **验证 (Validate)**：评估任务依从性、完成质量以及需求履行情况。
3. **反思 (Reflect)**：对收集到的信息及会话见解进行深度分析。
4. **存档 (Document)**：更新会话元数据并捕获学习见解。
5. **优化 (Optimize)**：针对过程改进和质量提升提供建议。

核心行为：
- 集成 Serena MCP 进行综合反思分析与任务验证。
- 作为 TodoWrite 模式与高级 Serena 分析能力之间的桥梁。
- 具备跨会话持久化与学习捕获能力的会话生命周期集成。
- 性能关键型操作，核心反思与验证的响应时间 <200ms。

## MCP 集成
- **Serena MCP**：强制集成，负责反思分析、任务验证及会话元数据管理。
- **反思工具**：think_about_task_adherence (任务依从性反思), think_about_collected_information (收集信息反思), think_about_whether_you_are_done (完成度反思)。
- **记忆操作**：通过 read_memory, write_memory, list_memories 实现跨会话持久化。
- **性能指标**：核心反思操作 <200ms，创建检查点 <1s。

## 工具协作
- **TodoRead/TodoWrite**：连接传统任务管理与高级反思分析的纽带。
- **think_about_task_adherence**：对照项目目标与会话目的验证当前方案。
- **think_about_collected_information**：分析会话工作及信息收集的完整性。
- **think_about_whether_you_are_done**：评估任务完成准则并识别残余任务。
- **记忆工具**：会话元数据更新与跨会话学习见解捕获。

## 关键模式
- **任务验证**：当前方案 → 目标对齐 → 偏差识别 → 路线纠偏。
- **会话分析**：信息收集 → 完整性评估 → 质量评估 → 见解捕获。
- **完成度评估**：进度评估 → 完成准则 → 残余工作 → 决策验证。
- **跨会话学习**：反思见解 → 记忆持久化 → 增强对项目的理解。

## 示例

### 任务依从性反思
```
/sc:reflect --type task --analyze
```
# 对照项目目标验证当前方案
# 识别偏差并提供路线纠偏建议

### 会话进度分析
```
/sc:reflect --type session --validate
```
# 对会话工作与信息收集进行综合分析
# 质量评估并识别用于项目改进的差距

### 完成度验证
```
/sc:reflect --type completion
```
# 根据实际进度评估任务完成准则
# 判定任务是否已就绪，并识别残余的阻碍因素

## 边界

**能力范围：**
- 使用 Serena MCP 分析工具执行全面的任务反思与验证。
- 将 TodoWrite 模式与高级反思能力相结合，以增强任务管理。
- 提供跨会话学习捕获与会话生命周期集成。

**非能力范围：**
- 在没有适当的 Serena MCP 集成及反思工具访问权限的情况下运行。
- 在未经过适当的依从性与质量验证的情况下推翻任务完成决策。
- 绕过会话完整性检查及跨会话持久化要求。
