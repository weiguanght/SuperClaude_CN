# Tavily MCP 服务器 (Tavily MCP Server)

**用途**：用于调研和获取实时信息的网页搜索与信息检索。

## 触发场景
- 需要超出 Claude 知识截止日期的网络搜索。
- 对时事、新闻及实时信息的需求。
- 市场调研与竞争分析任务。
- 训练数据中未包含的技术文档。
- 需要最新出版物的学术研究。
- 事实核查与验证需求。
- 需要多源分析的深度研究调查。
- 激活 `/sc:research` 命令。

## 何时选择
- **优于常规网页搜索 (WebSearch)**：当您需要具备高级过滤功能的结构化搜索时。
- **优于网页抓取 (WebFetch)**：当您需要多源搜索而非单页面提取时。
- **针对调研任务**：需要多个来源的综合性调查。
- **针对最新信息**：获取知识截止日期之后的事件、更新或变更。
- **不适用于**：可通过原生知识回答的简单问题、代码生成、本地文件操作。

## 最佳协同组合
- **Sequential (顺序推理)**：由 Tavily 提供原始信息 → 由 Sequential 进行分析与综合。
- **Playwright**：由 Tavily 发现 URL → 由 Playwright 提取复杂内容。
- **Context7**：由 Tavily 搜索更新动态 → 由 Context7 提供稳定的官方文档。
- **Serena**：由 Tavily 执行搜索 → 由 Serena 存储调研会话。

## 配置要求
需要在环境变量中配置来自 https://app.tavily.com 的 `TAVILY_API_KEY`。

## 搜索能力
- **网页搜索**：基于排名算法的通用网页搜索。
- **新闻搜索**：按时间过滤的新闻与时事。
- **学术搜索**：学术文章与研究论文。
- **域名过滤**：包含或排除特定域名。
- **内容提取**：从搜索结果中提取全文。
- **新鲜度控制**：优先显示最近的内容。
- **多轮搜索**：根据信息缺口进行迭代优化。

## 示例
```
"2024 年最新的 TypeScript 特性" → Tavily (最新的技术信息)
"本周 OpenAI GPT 的更新" → Tavily (最近的新闻与更新)
"2024 年量子计算的突破" → Tavily (最新的研究进展)
"React Server Components 最佳实践" → Tavily (当前的行业最佳实践)
"解释什么是递归" → 原生 Claude (通用概念解释)
"编写一个 Python 函数" → 原生 Claude (代码生成)
```

## 搜索模式

### 基础搜索
输入搜索语，返回带摘要的排名结果。

### 特定域名搜索
限定在如 `arxiv.org`, `github.com` 等特定域名内搜索。

### 时间过滤搜索
可选“周”、“月”、“年”等时间跨度。

### 深度内容搜索
启用内容提取功能，直接从头部搜索结果中抓取全文。

## 质量优化
- **查询优化**：根据初步结果迭代搜索。
- **来源多样性**：确保结果包含多个视角。
- **可信度过滤**：优先选择权威来源。
- **去重**：移除跨来源的冗余信息。
- **相关性评分**：聚焦于最贴切的结果。

## 集成流程

### 调研流程 (Research Flow)
1. Tavily：进行初步广泛搜索。
2. Sequential：分析并识别信息缺口。
3. Tavily：进行针对性的后续搜索。
4. Sequential：综合所有发现。
5. Serena：存储调研会话。

### 事实核查流程 (Fact-Checking Flow)
1. Tavily：搜索以验证主张。
2. Tavily：查找是否存在相反的证据。
3. Sequential：分析证据。
4. 报告：呈现平衡的调查发现。

### 竞争分析流程 (Competitive Analysis Flow)
1. Tavily：搜集竞争对手信息。
2. Tavily：搜寻市场趋势。
3. Sequential：进行对比分析。
4. Context7：提供技术规格对比。
5. 报告：产出战略洞察。

### 深度调研流程 (DR Agent Flow)
1. 规划：分解调研问题。
2. Tavily：执行规划好的搜索任务。
3. 分析：评估 URL 的复杂度。
4. 路由：简单页面由 Tavily 提取，复杂页面委派给 Playwright。
5. 综合：合并所有来源信息。
6. 迭代：根据缺口进行精炼。

## 故障处理
- **常见问题**：API Key 未配置、超出频率限制 (Rate Limit)、网络超时、未找到结果、查询格式错误。
- **备选策略**：切换至原生 WebSearch、尝试替换关键词、扩大搜索范围、使用缓存结果、简化搜索语。

## 最佳实践
1. **关键词构建**：从具体术语开始，必要时使用引号匹配精确短语。
2. **结果处理**：验证来源可信度，交叉比对多方信息，注意发布日期并提取核心内容。
3. **集成协作**：遵循“规划 -> 执行 -> 分析 -> 补漏 -> 综合”的闭环流程。
